{% extends "./base.html.twig" %}

{% block title %}
    Dashboard
{% endblock %}

{% block stylesheet %}
{% endblock %}

{% block nav %}{% include('admin/dashboard/_partials/nav.html.twig') %}{% endblock %}

{% block main %}
    <div class="container">
      {% include 'admin/dashboard/_partials/nav2.html.twig' %}
      <h2 class="text-center">Gestion des membres</h2>
      <div class="divide20"></div>
        {{ message.display }}
        {% include('admin/dashboard/_partials/pagination.html.twig') %}
        <p class="text-center">{{ number }} membres</p>
      <div class="post box">
        <table class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col" style="width:10%;">avatar</th>
              <th scope="col">Pseudo</th>
              <th scope="col">Mail</th>
              <th scope="col">Role</th>
              <th scope="col">Date</th>
              <th scope="col">Actif</th>
              <th scope="col">Banni</th>
              <th scope="col">Modifier</th>
              <th scope="col">Supprimer</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
              <tr>
                <th scope="row">{{ loop.index }}</th>
                <td style="width:10%;">
                  {% if user.image %}
                  <img src="../assets/img/{{ user.image }}" alt="" style="width:50%;">
                  {% elseif user.image is null %}
                  <img src="../assets/img/avatardefaut.png" alt="" style="width:50%;">
                  {% endif %}
                </td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ (user.roles) ? 'Admin' : 'Membre' }}</td>
                <td>{{ user.created_at|date("m/d/Y") }}</td>
                <td>{{ (user.active) ? 'Oui' : 'Non' }}</td>
                <td>
                  {% if user.banned %}
                  <i class="fa fa-exclamation-triangle fa-2x" style="color:red;"></i>
                  {% endif %}
                </td>
                <td>
                  {% if (user.username != session.admin.username) %}
                  <a href="" data-toggle="modal" data-target="#updateUser{{ user.id }}" data-id="{{ user.id }}">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                  </a>
                  {% endif %}
                  {% include('admin/dashboard/users/_modal_user_update.html.twig') %}
                </td>
                <td>
                  {% if (user.username != session.admin.username) %}
                    {% include('admin/dashboard/users/_form_user_delete.html.twig') %}
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="divide100"></div>
{% endblock %}

{% block js %}
{% endblock %}
