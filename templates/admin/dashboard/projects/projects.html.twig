{% extends "./base.html.twig" %}

{% block title %}
    Dashboard
{% endblock %}

{% block stylesheet %}
{% endblock %}

{% block nav %}{% include('admin/dashboard/_partials/nav.html.twig') %}{% endblock %}

{% block main %}
    <div class="container">

      {% include 'admin/dashboard/_partials/nav2.html.twig' %}
      <h2 class="text-center">Gestion des projets</h2>
      <div class="divide20"></div>
        {{ message.display }}
        <div class="post box">
            <h2>Ajouter un projet</h2>
              <div class="form-container">
                {% include('admin/dashboard/projects/_form_project_add.html.twig') %}
              </div>
            </div>
        <p class="text-center">{{ number }} projets</p>
        {% include('admin/dashboard/_partials/pagination.html.twig') %}

      <div class="post box">
        <table class="table table-striped table-dark">
          <thead>
            <tr>
              <th scope="col"></th>
              <th scope="col">Image</th>
              <th scope="col">Nom</th>
              <th scope="col">Statut</th>
              <th scope="col">Modifier</th>
              <th scope="col">Supprimer</th>
            </tr>
          </thead>
          <tbody>
            {% for project in projects %}
              <tr>
                <th scope="row">{{ loop.index }}</th>
                <td style="width:10%;"><img src="../assets/img/{{ project.url }}" style="width:100%;{{ project.style }}"></td>
                <td>{{ project.title }}</td>
                <td><a href="?c=adminProjects&t=togglePublished&g={{ project.published }}&id={{ project.id }}">{{ (project.published) ? 'Publié' : 'Non publié' }}</a></td>
                <td>
                  <a href="" data-toggle="modal" data-target="#updateProject{{ project.id }}" data-id="{{ project.id }}" value="{{ project.id }}"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                  {% include('admin/dashboard/projects/_modal_project_update.html.twig') %}
                </td>
                <td>
                  {% include('admin/dashboard/projects/_form_project_delete.html.twig') %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="divide100"></div>
{% endblock %}

{% block js %}


{% endblock %}
